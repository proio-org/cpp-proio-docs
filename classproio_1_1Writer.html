<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>proio: proio::Writer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">proio
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>proio</b></li><li class="navelem"><a class="el" href="classproio_1_1Writer.html">Writer</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classproio_1_1Writer-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">proio::Writer Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="writer_8h_source.html">writer.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for proio::Writer:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classproio_1_1Writer.png" usemap="#proio::Writer_map" alt=""/>
  <map id="proio::Writer_map" name="proio::Writer_map">
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a606d2b2b8c74e9117650d2c4189d15e6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproio_1_1Writer.html#a606d2b2b8c74e9117650d2c4189d15e6">Writer</a> (int fd)</td></tr>
<tr class="separator:a606d2b2b8c74e9117650d2c4189d15e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c163f144fbb4f8d3122d0204983aab4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproio_1_1Writer.html#a3c163f144fbb4f8d3122d0204983aab4">Writer</a> (std::string filename)</td></tr>
<tr class="separator:a3c163f144fbb4f8d3122d0204983aab4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa66ca9fb97a5439b7d97c1a116da4090"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproio_1_1Writer.html#aa66ca9fb97a5439b7d97c1a116da4090">Flush</a> ()</td></tr>
<tr class="separator:aa66ca9fb97a5439b7d97c1a116da4090"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada1aebeffc3689550bdfcf8a8c26417c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproio_1_1Writer.html#ada1aebeffc3689550bdfcf8a8c26417c">Push</a> (<a class="el" href="classproio_1_1Event.html">Event</a> *event)</td></tr>
<tr class="separator:ada1aebeffc3689550bdfcf8a8c26417c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6cd9af0a00a86c546c5f8d4b0ef5662c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproio_1_1Writer.html#a6cd9af0a00a86c546c5f8d4b0ef5662c">PushMetadata</a> (std::string name, const std::string &amp;data)</td></tr>
<tr class="separator:a6cd9af0a00a86c546c5f8d4b0ef5662c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6f94db91bd25ac275c527eb7b921a30"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproio_1_1Writer.html#ae6f94db91bd25ac275c527eb7b921a30">PushMetadata</a> (std::string name, const char *data)</td></tr>
<tr class="separator:ae6f94db91bd25ac275c527eb7b921a30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3acfa35de7236610c47ec78173bb8122"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproio_1_1Writer.html#a3acfa35de7236610c47ec78173bb8122">SetCompression</a> (Compression alg=GZIP, int level=-1)</td></tr>
<tr class="separator:a3acfa35de7236610c47ec78173bb8122"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e0b8b3811dc0ec6ea68c7d4c964d9b6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproio_1_1Writer.html#a1e0b8b3811dc0ec6ea68c7d4c964d9b6">SetBucketDumpThreshold</a> (uint64_t thres=0x1000000)</td></tr>
<tr class="separator:a1e0b8b3811dc0ec6ea68c7d4c964d9b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="classproio_1_1Writer.html">Writer</a> for proio files </p>

<p>Definition at line <a class="el" href="writer_8h_source.html#l00048">48</a> of file <a class="el" href="writer_8h_source.html">writer.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a606d2b2b8c74e9117650d2c4189d15e6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Writer::Writer </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Constructor for providing a file descriptor </p>

<p>Definition at line <a class="el" href="writer_8cc_source.html#l00012">12</a> of file <a class="el" href="writer_8cc_source.html">writer.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a3c163f144fbb4f8d3122d0204983aab4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Writer::Writer </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>filename</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Constructor that creates a file descriptor from a file path, overwriting any existing file </p>

<p>Definition at line <a class="el" href="writer_8cc_source.html#l00019">19</a> of file <a class="el" href="writer_8cc_source.html">writer.cc</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="aa66ca9fb97a5439b7d97c1a116da4090"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Writer::Flush </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Flush compresses and flushes all buffered (bucket) data to the output stream. This is automatically called upon destruction of the <a class="el" href="classproio_1_1Writer.html">Writer</a> object, and when the bucket dump threshold is reached. This function is asynchronous, meaning that it will return before the flush to the output stream is actually complete. Synchronization is forced on destruction. </p>

<p>Definition at line <a class="el" href="writer_8cc_source.html#l00046">46</a> of file <a class="el" href="writer_8cc_source.html">writer.cc</a>.</p>

</div>
</div>
<a class="anchor" id="ada1aebeffc3689550bdfcf8a8c26417c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Writer::Push </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproio_1_1Event.html">Event</a> *&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Push takes an <a class="el" href="classproio_1_1Event.html">Event</a> and serializes it into the output bucket. </p>

<p>Definition at line <a class="el" href="writer_8cc_source.html#l00096">96</a> of file <a class="el" href="writer_8cc_source.html">writer.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a6cd9af0a00a86c546c5f8d4b0ef5662c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Writer::PushMetadata </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>PushMetadata takes a string key and string data set and pushes it into the stream. If Events exist in the current bucket, the bucket is flushed first. </p>

<p>Definition at line <a class="el" href="writer_8cc_source.html#l00140">140</a> of file <a class="el" href="writer_8cc_source.html">writer.cc</a>.</p>

</div>
</div>
<a class="anchor" id="ae6f94db91bd25ac275c527eb7b921a30"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Writer::PushMetadata </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>PushMetadata takes a string key and null-terminated const char array by pointer and pushes it into the stream. If Events exist in the current bucket, the bucket is flushed first. </p>

<p>Definition at line <a class="el" href="writer_8cc_source.html#l00145">145</a> of file <a class="el" href="writer_8cc_source.html">writer.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a1e0b8b3811dc0ec6ea68c7d4c964d9b6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proio::Writer::SetBucketDumpThreshold </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>thres</em> = <code>0x1000000</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>SetBucketDumpThreshold sets the threshold uncompressed bucket size for automatic compression and output (dump). I.e., once the size of the uncompressed bucket in memory reaches this threshold, <a class="el" href="classproio_1_1Writer.html#aa66ca9fb97a5439b7d97c1a116da4090">Flush()</a> will be called. <a class="el" href="classproio_1_1Writer.html#aa66ca9fb97a5439b7d97c1a116da4090">Flush()</a> can also be manually called at any time. </p>

<p>Definition at line <a class="el" href="writer_8h_source.html#l00092">92</a> of file <a class="el" href="writer_8h_source.html">writer.h</a>.</p>

</div>
</div>
<a class="anchor" id="a3acfa35de7236610c47ec78173bb8122"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proio::Writer::SetCompression </td>
          <td>(</td>
          <td class="paramtype">Compression&#160;</td>
          <td class="paramname"><em>alg</em> = <code>GZIP</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>level</em> = <code>-1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>SetCompression sets the compression algorithm and compression level (-1 for default) to use for future output buckets. Algorithm is one of: LZ4, GZIP, or UNCOMPRESSED. </p>

<p>Definition at line <a class="el" href="writer_8h_source.html#l00083">83</a> of file <a class="el" href="writer_8h_source.html">writer.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/travis/build/proio-org/cpp-proio/src/<a class="el" href="writer_8h_source.html">writer.h</a></li>
<li>/home/travis/build/proio-org/cpp-proio/src/<a class="el" href="writer_8cc_source.html">writer.cc</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
